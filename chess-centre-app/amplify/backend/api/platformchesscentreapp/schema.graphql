type Plan @model
@auth(rules: [{allow: private}, {allow: private, provider: iam}])
@key(name: "key", fields: ["key"])
{
  id: ID!
  key: String!
  stripePriceId: String!
  stripeProductId: String!
}

type EventType @model @auth(rules: [{allow: private}]) {
  id: ID!
  name: String!
  description: String
  url: String
  color: String
  time: String
  maxEntries: Int
}

type ECFPlayer @model @auth(rules: [{allow: private}]) {
  id: ID!
  ecfId: String
  club: String
  currentRating: String
}

type FidePlayer @model @auth(rules: [{allow: private}]) {
  id: ID!
  fideId: Int
  federation: String
  title: String
  currentRating: Int
}

type Member @model
@auth(rules: [{allow: private, provider: iam}, {allow: owner, ownerField: "id", operations: [read, update]}])
@key(name: "stripe", fields: ["stripeCustomerId"])
{
  id: ID!
  about: String
  fideId: Int
  ecfId: String
  username: String
  eventsByEmail: Boolean
  promoByEmail: Boolean
  eventsByText: Boolean
  promoByText: Boolean
  stripeCustomerId: ID @auth(rules: [{allow: owner, ownerField: "id", operations: [read]}])
  stripeCurrentPeriodEnd: Int @auth(rules: [{allow: owner, ownerField: "id", operations: [read]}])
  stripePriceId: ID @auth(rules: [{allow: owner, ownerField: "id", operations: [read]}])
  stripeProductId: ID @auth(rules: [{allow: owner, ownerField: "id", operations: [read]}])
}

type Event @model @auth(rules: [{allow: private}, {allow: private, provider: iam}]) {
  id: ID!
  name: String
  description: String
  rounds: Int
  time: String
  type: EventType! @connection
  startDate: AWSDate!
  endDate: AWSDate
  entries: Int
  maxEntries: Int
}
